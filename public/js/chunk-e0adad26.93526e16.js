(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-e0adad26"],{"2edc":function(e,t,a){"use strict";a.d(t,"a",function(){return n}),a.d(t,"h",function(){return i}),a.d(t,"c",function(){return o}),a.d(t,"d",function(){return c}),a.d(t,"e",function(){return l}),a.d(t,"g",function(){return s}),a.d(t,"f",function(){return d}),a.d(t,"b",function(){return u});var r=a("b775");function n(e){return Object(r.a)({url:"/v1/delivery_item",method:"post",params:{method:"add.delivery.company.item"},data:e})}function i(e){return Object(r.a)({url:"/v1/delivery_item",method:"post",params:{method:"set.delivery.company.item"},data:e})}function o(e){return Object(r.a)({url:"/v1/delivery_item",method:"post",params:{method:"del.delivery.company.list"},data:{delivery_item_id:e}})}function c(e){return Object(r.a)({url:"/v1/delivery_item",method:"post",params:{method:"get.delivery.company.item"},data:{delivery_item_id:e}})}function l(e){return Object(r.a)({url:"/v1/delivery_item",method:"post",params:{method:"get.delivery.company.list"},data:e})}function s(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null;return Object(r.a)({url:"/v1/delivery_item",method:"post",params:{method:"get.delivery.company.select"},data:{type:e}})}function d(e){return Object(r.a)({url:"/v1/delivery_item",method:"post",params:{method:"get.delivery.company.recognise"},data:{code:e}})}function u(e){return Object(r.a)({url:"/v1/delivery_item",method:"post",params:{method:"copy.delivery.company.hot"},data:{delivery_item_id:e}})}},3416:function(e,t,a){"use strict";a.r(t);a("8e6e"),a("456d"),a("ac6a");var r=a("bd86"),n=(a("7f7f"),a("65b0")),i=a("2edc");function o(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),a.push.apply(a,r)}return a}var c={props:{loading:{default:!1},tableData:{default:function(){return[]}},traceState:{default:function(){}}},data:function(){return{companyList:[],companyCopy:[],traceType:0,traceData:null,traceLoading:!1,traceFormVisible:!1,traceForm:{delivery_code:void 0,logistic_code:void 0}}},filters:{getStateType:function(e){switch(e){case 3:return"success";case 4:return"danger";default:return"info"}},getUserInfo:function(e){var t=e.username||"-",a=e.nickname||"-";return"".concat(t," / ").concat(a)}},methods:{sortChange:function(e){var t=e.column,a=e.prop,r=e.order,n={order_type:void 0,order_field:void 0};t&&r&&(n.order_type="ascending"===r?"asc":"desc",n.order_field=a),this.$emit("sort",n)},getDeliveryCompany:function(e){var t=this;this.traceData=null,!e||0<this.companyList.length?this.$refs.logisticCode.focus():Object(i.g)().then(function(e){t.companyList=0<e.data.length?e.data:[],t.companyCopy=t.companyList})},handleChange:function(e){5<this.traceForm.logistic_code.length&&(this.traceForm.delivery_code=e,this.trace())},handleVisibleChange:function(e){var t=this;e||setTimeout(function(){t.companyList=t.companyCopy},500)},filterDelivery:function(t){this.companyList=t?this.companyCopy.filter(function(e){if(~e.name.indexOf(t)||~e.phonetic.toLowerCase().indexOf(t.toLowerCase()))return!0}):this.companyCopy},handleTrace:function(){this.traceForm={delivery_code:"",logistic_code:""},this.traceType=0,this.traceData=null,this.traceLoading=!1,this.traceFormVisible=!0},handleSelect:function(e){this.traceForm={delivery_code:e.code,logistic_code:e.value},this.trace()},trace:function(){var t=this;this.traceData=null,this.traceLoading=!0,Object(n.b)(function(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?o(a,!0).forEach(function(e){Object(r.a)(t,e,a[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):o(a).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))})}return t}({},this.traceForm)).then(function(e){t.traceData=e.data.trace}).finally(function(){t.traceLoading=!1})},querySearchAsync:function(t,e){var a=[];this.traceData=null,t.length<5||this.traceType?e(a):Object(i.f)(t).then(function(e){e.data.shippers.forEach(function(e){a.push({value:t,name:e.shipper_name,code:e.shipper_code})})}).finally(function(){e(a)})}}},l=(a("3a2f"),a("2877")),s=Object(l.a)(c,function(){var a=this,e=a.$createElement,r=a._self._c||e;return r("div",{staticClass:"cs-p"},[r("el-form",{attrs:{inline:!0,size:"small"}},[r("el-form-item",{directives:[{name:"has",rawName:"v-has",value:"/setting/logistics/dist/trace",expression:"'/setting/logistics/dist/trace'"}]},[r("el-button",{attrs:{disabled:a.loading,type:"primary",plain:""},on:{click:a.handleTrace}},[r("cs-icon",{attrs:{name:"map-marker"}}),a._v("\n        即时查询\n      ")],1)],1),r("cs-help",{staticStyle:{"padding-bottom":"19px"},attrs:{router:a.$route.path}})],1),r("el-table",{directives:[{name:"loading",rawName:"v-loading",value:a.loading,expression:"loading"}],attrs:{data:a.tableData,stripe:""},on:{"sort-change":a.sortChange}},[r("el-table-column",{attrs:{type:"expand"},scopedSlots:a._u([{key:"default",fn:function(e){return[r("el-form",{attrs:{"label-position":"left",inline:""}},[0<Object.keys(e.row.trace).length?r("el-timeline",a._l(e.row.trace,function(e,t){return r("el-timeline-item",{key:t,attrs:{timestamp:e.accept_time,type:"primary"}},[a._v("\n              "+a._s(e.accept_station)+"\n            ")])}),1):r("div",{staticClass:"not-trace"},[r("span",[a._v("暂无轨迹")])])],1)]}}])}),r("el-table-column",{attrs:{label:"流水号",prop:"order_code","min-width":"210",sortable:"custom"}}),r("el-table-column",{attrs:{label:"快递公司",prop:"get_delivery_item.name","min-width":"120"}}),r("el-table-column",{attrs:{label:"快递单号",prop:"logistic_code","min-width":"170",sortable:"custom","show-overflow-tooltip":!0}}),r("el-table-column",{attrs:{label:"所属账号/昵称","min-width":"160","show-overflow-tooltip":!0},scopedSlots:a._u([{key:"default",fn:function(e){return[a._v("\n        "+a._s(a._f("getUserInfo")(e.row.get_user))+"\n      ")]}}])}),r("el-table-column",{attrs:{label:"状态",prop:"state",sortable:"custom"},scopedSlots:a._u([{key:"default",fn:function(e){return[r("el-tag",{attrs:{type:a._f("getStateType")(e.row.state),effect:"plain",size:"mini"}},[a._v("\n          "+a._s(a.traceState[e.row.state])+"\n        ")])]}}])}),r("el-table-column",{attrs:{label:"创建日期",prop:"create_time",align:"center",width:"160"}})],1),r("el-dialog",{attrs:{title:"即时查询",visible:a.traceFormVisible,"append-to-body":!0,"close-on-click-modal":!1,width:"600px"},on:{"update:visible":function(e){a.traceFormVisible=e}}},[r("el-form",{directives:[{name:"loading",rawName:"v-loading",value:a.traceLoading,expression:"traceLoading"}],attrs:{"label-width":"80px"}},[r("el-form-item",{attrs:{label:"快递单号",prop:"logistic_code"}},[a.traceFormVisible?r("el-autocomplete",{ref:"logisticCode",staticClass:"input-with-select",staticStyle:{width:"100%"},attrs:{"fetch-suggestions":a.querySearchAsync,placeholder:"请输入快递单号",clearable:!0},on:{select:a.handleSelect},scopedSlots:a._u([{key:"default",fn:function(e){var t=e.item;return[r("span",[a._v(a._s(t.value)+" "+a._s(t.name))])]}}],null,!1,1805238878),model:{value:a.traceForm.logistic_code,callback:function(e){a.$set(a.traceForm,"logistic_code",e)},expression:"traceForm.logistic_code"}},[r("el-select",{staticStyle:{width:"105px"},attrs:{slot:"prepend",placeholder:"请选择",value:""},on:{change:a.getDeliveryCompany},slot:"prepend",model:{value:a.traceType,callback:function(e){a.traceType=e},expression:"traceType"}},[r("el-option",{attrs:{label:"智能识别",value:0}}),r("el-option",{attrs:{label:"手动获取",value:1}})],1),a.traceType?r("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:a.trace},slot:"append"}):a._e()],1):a._e()],1),r("el-form-item",{directives:[{name:"show",rawName:"v-show",value:a.traceType,expression:"traceType"}],attrs:{label:"快递公司",prop:"delivery_code"}},[r("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择快递公司，试试搜索：顺丰 或 s",filterable:"","filter-method":a.filterDelivery,clearable:"",value:""},on:{change:a.handleChange,"visible-change":a.handleVisibleChange},model:{value:a.traceForm.delivery_code,callback:function(e){a.$set(a.traceForm,"delivery_code",e)},expression:"traceForm.delivery_code"}},a._l(a.companyList,function(e){return r("el-option",{key:e.delivery_item_id,attrs:{label:e.name,value:e.code}})}),1)],1)],1),null!==a.traceData?r("div",[r("el-divider",[a._v("物流轨迹")]),0<a.traceData.length?r("el-timeline",a._l(a.traceData,function(e,t){return r("el-timeline-item",{key:t,attrs:{timestamp:e.accept_time,type:"primary"}},[a._v("\n          "+a._s(e.accept_station)+"\n        ")])}),1):r("div",{staticClass:"not-trace"},[r("span",[a._v("暂无轨迹")])])],1):a._e()],1)],1)},[],!1,null,"1d432418",null);t.default=s.exports},"3a2f":function(e,t,a){"use strict";var r=a("9b73");a.n(r).a},"9b73":function(e,t,a){}}]);