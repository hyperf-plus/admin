(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-5f97ffb0"],{"0d7c":function(t,e,o){"use strict";var n=o("5204");o.n(n).a},5204:function(t,e,o){},8703:function(t,e,o){"use strict";o.r(e);o("8e6e"),o("ac6a"),o("456d");var n=o("bd86"),s=o("ca00"),i=o("2f62"),a=o("f663");function r(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),o.push.apply(o,n)}return o}var c={props:{loading:{default:!1},tableData:{default:function(){return[]}}},data:function(){return{currentTableData:[],auth:{ignore:!1,show:!1,hide:!1,top:!1,remove_top:!1,del:!1,detail:!1},srcList:[],statusMap:{0:{text:"待处理",type:"warning"},1:{text:"已处理",type:"success"}},topMap:{0:{text:"普通",type:"info"},1:{text:"置顶",type:"warning"},2:{text:"...",type:"info"}},showMap:{0:{text:"隐藏",type:"danger"},1:{text:"显示",type:"success"},2:{text:"...",type:"info"}}}},filters:{getPreviewUrl:function(t,e){return t&&t.source?s.a.getImageCodeUrl(t.source,e):""}},watch:{tableData:{handler:function(t){this.currentTableData=t},immediate:!0}},activated:function(){this.updateChange({name:"goods-opinion-comment",source:this.currentTableData,key:"goods_comment_id"})},mounted:function(){this._validationAuth()},methods:function(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?r(o,!0).forEach(function(t){Object(n.a)(e,t,o[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):r(o).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))})}return e}({},Object(i.b)("careyshop/update",["updateChange"]),{_validationAuth:function(){this.auth.ignore=this.$has("/goods/opinion/comment/ignore"),this.auth.show=this.$has("/goods/opinion/comment/show"),this.auth.hide=this.$has("/goods/opinion/comment/hide"),this.auth.top=this.$has("/goods/opinion/comment/top"),this.auth.remove_top=this.$has("/goods/opinion/comment/remove_top"),this.auth.del=this.$has("/goods/opinion/comment/del"),this.auth.detail=this.$has("/goods/opinion/comment/detail")},setImageSrcList:function(t,e){this.srcList=s.a.setImageSrcList(t,e)},handleIgnore:function(t){var e=this;this.$confirm("确定要执行该操作吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",closeOnClickModal:!1}).then(function(){Object(a.f)([e.currentTableData[t].goods_comment_id],1).then(function(){e.currentTableData[t].status=1,e.$message.success("操作成功")})}).catch(function(){})},handleDelete:function(t){var e=this;this.$confirm("确定要执行该操作吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",closeOnClickModal:!1}).then(function(){Object(a.a)(e.currentTableData[t].goods_comment_id).then(function(){e.currentTableData.splice(t,1),e.currentTableData.length<=0&&e.$emit("refresh",!0),e.$message.success("操作成功")})}).catch(function(){})},openCommentDetail:function(t){this.auth.detail&&this.$router.push({name:"goods-opinion-comment-detail",params:{goods_comment_id:t}})},handleTop:function(t){var e=this,o=this.currentTableData[t],n=o.is_top,s=n?0:1;1<n||0==s&&!this.auth.remove_top||1==s&&!this.auth.top||(o.is_top=2,Object(a.g)([o.goods_comment_id],s).then(function(){o.is_top=s,e.$message.success("操作成功")}).catch(function(){o.is_top=n}))},handleShow:function(t){var e=this,o=this.currentTableData[t],n=o.is_show,s=n?0:1;1<n||0==s&&!this.auth.hide||1==s&&!this.auth.show||(o.is_show=2,Object(a.e)([o.goods_comment_id],s).then(function(){o.is_show=s,e.$message.success("操作成功")}).catch(function(){o.is_show=n}))},handleView:function(t){this.$router.push({name:"goods-admin-view",params:{goods_id:t}})}})},l=(o("0d7c"),o("2877")),u=Object(l.a)(c,function(){var n=this,t=n.$createElement,s=n._self._c||t;return s("div",{staticClass:"cs-p"},[s("el-table",{directives:[{name:"loading",rawName:"v-loading",value:n.loading,expression:"loading"}],attrs:{data:n.currentTableData}},[s("el-table-column",{attrs:{label:"商品信息","min-width":"380"},scopedSlots:n._u([{key:"default",fn:function(e){return[s("el-image",{staticClass:"goods-image cs-ml-10",attrs:{src:n._f("getPreviewUrl")(e.row.get_order_goods.goods_image,"goods_image_x80"),fit:"contain",lazy:""},on:{click:function(t){return n.handleView(e.row.get_order_goods.goods_id)}}}),s("div",{staticClass:"goods-info cs-ml"},[s("p",[s("span",{staticClass:"link",attrs:{title:e.row.get_order_goods.goods_name},on:{click:function(t){return n.handleView(e.row.get_order_goods.goods_id)}}},[n._v(n._s(e.row.get_order_goods.goods_name))])]),s("p",[s("span",{staticClass:"comment-son",attrs:{title:e.row.get_order_goods.key_value}},[n._v(n._s(e.row.get_order_goods.key_value))])]),s("p",[s("el-tag",{attrs:{type:n.statusMap[e.row.status].type,effect:"plain",size:"mini"}},[n._v("\n              "+n._s(n.statusMap[e.row.status].text)+"\n            ")]),s("el-tag",{staticStyle:{margin:"0 10px"},style:n.auth.top||n.auth.remove_top?"cursor: pointer;":"",attrs:{size:"mini",type:n.topMap[e.row.is_top].type,effect:n.auth.top||n.auth.remove_top?"light":"plain"},nativeOn:{click:function(t){return n.handleTop(e.$index)}}},[n._v("\n              "+n._s(n.topMap[e.row.is_top].text)+"\n            ")]),s("el-tag",{style:n.auth.show||n.auth.hide?"cursor: pointer;":"",attrs:{size:"mini",type:n.showMap[e.row.is_show].type,effect:n.auth.show||n.auth.hide?"light":"plain"},nativeOn:{click:function(t){return n.handleShow(e.$index)}}},[n._v("\n              "+n._s(n.showMap[e.row.is_show].text)+"\n            ")])],1)])]}}])}),s("el-table-column",{attrs:{label:"商品评价","min-width":"300"},scopedSlots:n._u([{key:"default",fn:function(o){return[s("div",{staticClass:"goods-comment"},[s("p",[n._v("[主评] "),s("span",{staticClass:"comment-son"},[n._v(n._s(o.row.create_time))])]),s("p",[s("span",{class:{link:n.auth.detail},on:{click:function(t){return n.openCommentDetail(o.row.goods_comment_id)}}},[n._v(n._s(o.row.content))])]),s("div",{staticStyle:{"line-height":"0"}},n._l(o.row.image,function(t,e){return s("el-image",{key:e,staticClass:"comment_thumb",attrs:{src:n._f("getPreviewUrl")(t,"comment_thumb_x40"),"preview-src-list":n.srcList,lazy:!0,fit:"cover"},on:{click:function(t){return t.stopPropagation(),n.setImageSrcList(o.row.image,e)}}})}),1)]),o.row.get_addition?s("div",{staticClass:"goods-comment"},[s("p",[n._v("[追评] "),s("span",{staticClass:"comment-son"},[n._v(n._s(o.row.get_addition.create_time))])]),s("p",[s("span",{class:{link:n.auth.detail},on:{click:function(t){return n.openCommentDetail(o.row.goods_comment_id)}}},[n._v(n._s(o.row.get_addition.content))])]),s("div",{staticStyle:{"line-height":"0"}},n._l(o.row.get_addition.image,function(t,e){return s("el-image",{key:e,staticClass:"comment_thumb",attrs:{src:n._f("getPreviewUrl")(t,"comment_thumb_x40"),"preview-src-list":n.srcList,lazy:!0,fit:"cover"},on:{click:function(t){return t.stopPropagation(),n.setImageSrcList(o.row.get_addition.image,e)}}})}),1)]):n._e()]}}])}),s("el-table-column",{attrs:{width:"220"},scopedSlots:n._u([{key:"default",fn:function(e){return[s("div",{staticClass:"goods_user"},[s("p",[s("span",[n._v(n._s(e.row.get_user.username))]),e.row.get_user.level_icon?s("el-image",{staticClass:"level-icon",attrs:{src:e.row.get_user.level_icon,fit:"fill"}},[s("div",{staticClass:"image-slot",attrs:{slot:"error"},slot:"error"},[s("i",{staticClass:"el-icon-picture-outline"})])]):n._e()],1),s("p",[s("span",{staticClass:"comment-son"},[n._v(n._s(e.row.order_no))])]),s("el-rate",{attrs:{disabled:!0,colors:["#99A9BF","#F7BA2A","#FF9900"]},model:{value:e.row.score,callback:function(t){n.$set(e.row,"score",t)},expression:"scope.row.score"}})],1)]}}])}),s("el-table-column",{attrs:{label:"操作",align:"center","min-width":"100"},scopedSlots:n._u([{key:"default",fn:function(e){return[!e.row.status&&n.auth.ignore?s("el-button",{attrs:{size:"small",type:"text"},on:{click:function(t){return n.handleIgnore(e.$index)}}},[n._v("忽略")]):n._e(),n.auth.del?s("el-button",{attrs:{size:"small",type:"text"},on:{click:function(t){return n.handleDelete(e.$index)}}},[n._v("删除")]):n._e()]}}])})],1)],1)},[],!1,null,"4e8cab31",null);e.default=u.exports}}]);